<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>PDF ë‹¨ì–´ì¥ ë§Œë“¤ê¸°</title>
</head>
<body>
  <h1>ğŸ“„ PDF ë‹¨ì–´ì¥ ë§Œë“¤ê¸°</h1>

  <input type="file" id="pdfFile" accept="application/pdf">
  <button onclick="readPDF()">PDF ì½ê¸°</button>

  <pre id="output"></pre>

  <!-- pdf.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>

  <script>
    async function readPDF() {
      const file = document.getElementById("pdfFile").files[0];
      if (!file) {
        alert("PDFë¥¼ ì„ íƒí•˜ì„¸ìš”");
        return;
      }

      const reader = new FileReader();
      reader.onload = async function () {
        const typedarray = new Uint8Array(this.result);

        const pdf = await pdfjsLib.getDocument(typedarray).promise;
        let text = "";

        for (let i = 1; i <= pdf.numPages; i++) {
          const page = await pdf.getPage(i);
          const content = await page.getTextContent();
          content.items.forEach(item => {
            text += item.str + "\n";
          });
        }

        document.getElementById("output").textContent = text;

        // localStorageì— ì €ì¥
        localStorage.setItem("pdfWords", text);
      };

      reader.readAsArrayBuffer(file);
    }
  </script>
</body>
</html>
